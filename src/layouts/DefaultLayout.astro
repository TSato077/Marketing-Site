---
import '../styles/globals.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const {
	title = 'SatoFoto | Holiday Family Portrait Experience — Photo Session with Takashi Sato',
	description = 'Premium 25-minute holiday family portraits in Arizona by SatoFoto. $300 mini sessions at Sahuaro Ranch Park with all images + 10 retouched finals.',
	ogImage,
} = Astro.props;
const resolvedOgImage = typeof ogImage === 'string' && ogImage.length > 0 ? ogImage : undefined;

const schemaOrg = {
	'@context': 'https://schema.org',
	'@graph': [
		{
			'@type': 'Organization',
			name: 'SatoFoto',
			url: 'https://satofoto.com',
			logo: 'https://satofoto.com/favicon.svg',
			address: {
				'@type': 'PostalAddress',
				addressRegion: 'AZ',
				addressLocality: 'Phoenix',
				addressCountry: 'US',
			},
			sameAs: ['https://instagram.com/sato_foto'],
		},
		{
			'@type': 'Product',
			name: 'Holiday Family Portrait Mini Session',
			description:
				'Premium 25-minute holiday family portrait experience by SatoFoto. Includes all unretouched images plus 10 retouched finals.',
			brand: {
				'@type': 'Brand',
				name: 'SatoFoto',
			},
			offers: {
				'@type': 'Offer',
				price: '300',
				priceCurrency: 'USD',
				availability: 'https://schema.org/InStock',
				url: 'https://satofoto.com/#reserve',
			},
		},
	],
};
---

<!doctype html>
<html lang="en" class="scroll-pt-24 lg:scroll-pt-32">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://satofoto.com" />
		{resolvedOgImage && (
			<>
				<meta property="og:image" content={resolvedOgImage} />
				<meta property="og:image:alt" content="Family gathered for portraits during the SatoFoto holiday session experience." />
			</>
		)}
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		{resolvedOgImage && <meta name="twitter:image" content={resolvedOgImage} />}
		<script type="application/ld+json">
			{JSON.stringify(schemaOrg)}
		</script>
	</head>
	<body class="bg-white font-body text-brand-charcoal">
		<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:rounded-md focus:bg-white focus:px-4 focus:py-2 focus:text-sm focus:font-medium focus:shadow-subtle">Skip to content</a>
		<Header />
		<main id="main-content" class="flex min-h-screen flex-col">
			<slot />
		</main>
		<Footer />
		<div class="fixed bottom-0 left-0 right-0 z-40 bg-brand-indigo/95 px-4 py-3 text-white shadow-subtle md:hidden">
			<div class="mx-auto flex max-w-3xl items-center justify-between gap-4">
				<div>
					<p class="text-sm font-semibold tracking-wide">Reserve Now — $300</p>
					<p class="text-xs text-white/80">Limited holiday sessions available</p>
				</div>
				<button
					type="button"
					data-open-mini-form-mobile
					data-form-url="https://docs.google.com/forms/d/e/1FAIpQLSdUtF7DdRpdIN7xA8o7hkab2gK6wNN34R8DaXsrVkW3ZTrd8A/viewform"
					class="shrink-0 rounded-md bg-white px-4 py-2 text-sm font-semibold text-brand-indigo transition duration-200 ease-soft hover:bg-brand-gray"
				>
					Book Now
				</button>
			</div>
		</div>
	</body>
	<script is:inline>
		(function() {
			const openMiniFormButton = document.querySelector('[data-open-mini-form-mobile]');
			if (openMiniFormButton) {
				const formUrl = openMiniFormButton.getAttribute('data-form-url');
				if (formUrl) {
					openMiniFormButton.addEventListener('click', () => {
						// Open form in popup window
						const width = 800;
						const height = 1000;
						const left = (window.innerWidth - width) / 2;
						const top = (window.innerHeight - height) / 2;
						
						window.open(
							formUrl,
							'SatoFoto Booking Form',
							`width=${width},height=${height},left=${left},top=${top},resizable=yes,scrollbars=yes`
						);
					});
				}
			}
		})();
	</script>
</html>

